<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/paper-material/paper-material.html">
<link rel="import" href="/bower_components/paper-item/paper-item.html">
<link rel="import" href="/bower_components/paper-item/paper-item-body.html">

<dom-module id="hn-story-list">
  <style>
    #line1, #line2 {
      display: -weblot=flex;
      display: flex;
    }
    
    #story {
      margin-bottom: 1ex;
    }
    
    .score {
      font-size: 116%;
      min-width: 3em;
      text-align: right;
      font-weight: 500;
    }
    
    #line2content {
      font-size: 70%;
    }
    
    #line2content a {
      color: black;
    }
    
    #line2content a:visited {
      color: gray;
    }

    #line2strut {
      margin-left: 3em;
    }

  </style>
  <template>
    <template is="dom-repeat" items="{{stories}}">
      <div id="story">
        <div id="line1">
            <span class="score">{{item.score}}</span>&ensp;<span><a href="{{itemUrl(item)}}" target="_blank">{{item.title}}</a></span>
        </div>
        <div id="line2">
          <span class="score">&nbsp;</span>&ensp;<span id="line2content"><span>by&nbsp;</span><!--
          --><a href="{{userUrl(item.by)}}" target="_blank">{{item.by}}</a><!--
          --><span>&nbsp;|&nbsp;</span><!--
          --><a href="{{storyUrl(item.id)}}" target="__blank"><span>{{item.descendants}}</span><span>&nbsp;comments</span></a>
          </span>
        </div>
      </div>
    </template>
  </template>
</dom-module>

<script>
  Polymer({
    is: "hn-story-list",

    properties: {
      stories: Array
    },
    
    storyUrl: function(storyId) {
      return "https://news.ycombinator.com/item?id=" + storyId;
    },

    userUrl: function(userId) {
      return "https://news.ycombinator.com/user?id=" + userId;
    },
    
    itemUrl: function(item) {
      return item.url || this.storyUrl(item.id);
    }

  });
</script>
