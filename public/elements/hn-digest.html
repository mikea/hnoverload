<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/iron-flex-layout/iron-flex-layout.html">

<link rel="import" href="hn-day-digest.html">

<dom-module id="hn-digest">
  <template>
    <template is="dom-repeat" items="{{days}}" as="day">
      <hn-day-digest date="[[day]]"></hn-day-digest>
    </template>
  </template>
</dom-module>

<script>
  Polymer({
    is: "hn-digest",

    properties: {
      stories: Array,
      
      days: {
        type: Array,
        notify: true,
        value: function() {
          var today = new Date();
          today.setHours(0, 0, 0);
          
          var result = [];
          for (var i = 0, d = new Date(today); i < 7; i++, d.setDate(d.getDate() - 1)) {
            result.push(d.toISOString().substring(0, 10));
          }
        
          return result;
        }
      }
    },
    
    storyUrl: function(storyId) {
      return "https://news.ycombinator.com/item?id=" + storyId;
    }

  });
</script>
